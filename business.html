<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register Your Business</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins',sans-serif;
}
body{
    min-height:100vh;
    background:linear-gradient(135deg,#b2f7ef,#d6fff6,#fff9c4);
    display:flex;
    justify-content:center;
    padding:20px;
}
.container{
    width:100%;
    max-width:480px;
    background:#fff;
    border-radius:22px;
    padding:22px;
    box-shadow:0 20px 40px rgba(0,0,0,0.15);
}
h2{
    text-align:center;
    color:#006d77;
    margin-bottom:12px;
}
label{
    font-size:.85rem;
    font-weight:600;
    color:#333;
}
input, select, textarea{
    width:100%;
    margin-top:6px;
    padding:12px;
    border-radius:12px;
    border:1px solid #ccc;
    font-size:.9rem;
}
textarea{resize:none}
input:focus, textarea:focus{
    border-color:#00b4d8;
    outline:none;
}
.form-group{margin-top:14px}

/* GST STATUS */
.gstin-status{
    font-size:.75rem;
    font-weight:600;
    margin-top:4px;
}
.valid{color:green}
.invalid{color:red}

/* DAYS */
.days{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    margin-top:8px;
}
.days label{
    background:#e0f7fa;
    padding:6px 10px;
    border-radius:999px;
    font-size:.75rem;
    cursor:pointer;
}

/* TOGGLE */
.toggle{
    display:flex;
    align-items:center;
    gap:8px;
    margin-top:10px;
}

/* BUTTON */
button{
    width:100%;
    margin-top:16px;
    padding:14px;
    border:none;
    border-radius:14px;
    background:linear-gradient(135deg,#00b4d8,#0077b6);
    color:white;
    font-size:1rem;
    font-weight:600;
    cursor:pointer;
}
.secondary{
    background:linear-gradient(135deg,#adb5bd,#6c757d);
}
.note{
    font-size:.75rem;
    color:#555;
    margin-top:6px;
}
</style>
</head>

<body>
<div class="container">
<h2>Register Your Business</h2>

<form onsubmit="return validateForm()">

<!-- BUSINESS NAME -->
<div class="form-group">
    <label>Business Name</label>
    <input required>
</div>

<!-- CATEGORY -->
<div class="form-group">
    <label>Category</label>
    <select required>
        <option value="">Select Category</option>
        <option>PG / Hostel</option>
        <option>Mess / Tiffin</option>
        <option>Medical Store</option>
        <option>Stationery</option>
    </select>
</div>

<!-- GSTIN -->
<div class="form-group">
    <label>GSTIN</label>
    <input id="gstin" maxlength="15" oninput="validateGST(this)">
    <div id="gstStatus" class="gstin-status"></div>
</div>

<!-- WORKING DAYS -->
<div class="form-group">
    <label>Working Days</label>
    <div class="days">
        <label><input type="checkbox"> Mon</label>
        <label><input type="checkbox"> Tue</label>
        <label><input type="checkbox"> Wed</label>
        <label><input type="checkbox"> Thu</label>
        <label><input type="checkbox"> Fri</label>
        <label><input type="checkbox"> Sat</label>
        <label><input type="checkbox"> Sun</label>
    </div>
</div>

<!-- TIMINGS -->
<div class="form-group">
    <label>Opening Time</label>
    <input type="time" id="openTime">
</div>

<div class="form-group">
    <label>Closing Time</label>
    <input type="time" id="closeTime">
</div>

<div class="toggle">
    <input type="checkbox" id="allDay" onchange="toggle24(this)">
    <label>Open 24 Hours</label>
</div>

<!-- ADDRESS -->
<div class="form-group">
    <label>Business Address</label>
    <textarea id="address" rows="3"
        placeholder="Auto-filled when latitude & longitude are available"></textarea>
</div>

<!-- LOCATION -->
<div class="form-group">
    <label>Latitude</label>
    <input id="lat" placeholder="Enter latitude manually">
</div>

<div class="form-group">
    <label>Longitude</label>
    <input id="lng" placeholder="Enter longitude manually">
</div>

<div class="note">
    Address will auto-detect when both latitude & longitude are entered (manual or auto).
</div>

<button type="button" class="secondary" onclick="detectLocation()">üìç Auto Detect Location</button>
<button type="submit">Submit for Approval</button>

</form>
</div>

<script>
let gstValid = false;

const latInput = document.getElementById("lat");
const lngInput = document.getElementById("lng");

/* GST VALIDATION */
function validateGST(el){
    const regex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z][1-9A-Z]Z[0-9A-Z]$/;
    const status = document.getElementById("gstStatus");

    if(!el.value){
        status.innerHTML="";
        gstValid=false;
        return;
    }
    if(regex.test(el.value.toUpperCase())){
        status.innerHTML="‚úî Valid GSTIN";
        status.className="gstin-status valid";
        gstValid=true;
    }else{
        status.innerHTML="‚úñ Invalid GSTIN";
        status.className="gstin-status invalid";
        gstValid=false;
    }
}

/* 24 HOUR TOGGLE */
function toggle24(el){
    document.getElementById("openTime").disabled = el.checked;
    document.getElementById("closeTime").disabled = el.checked;
}

/* AUTO LOCATION */
function detectLocation(){
    if(!navigator.geolocation){
        alert("Geolocation not supported");
        return;
    }
    navigator.geolocation.getCurrentPosition(pos=>{
        latInput.value = pos.coords.latitude.toFixed(6);
        lngInput.value = pos.coords.longitude.toFixed(6);
        fetchAddress();
    },()=>alert("Location permission denied"));
}

/* AUTO FETCH ADDRESS */
latInput.addEventListener("input", fetchAddress);
lngInput.addEventListener("input", fetchAddress);

function fetchAddress(){
    const lat = latInput.value.trim();
    const lng = lngInput.value.trim();

    if(lat && lng){
        fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`)
        .then(res=>res.json())
        .then(data=>{
            if(data.display_name){
                document.getElementById("address").value = data.display_name;
            }
        });
    }
}

/* FINAL FORM CHECK */
function validateForm(){
    if(!gstValid){
        alert("Please enter a valid GSTIN before submitting.");
        return false;
    }
    return true;
}
</script>

</body>
</html>
